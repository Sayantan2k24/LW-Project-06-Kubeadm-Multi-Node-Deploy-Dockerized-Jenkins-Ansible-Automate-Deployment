# Create namespace
kubectl apply -f namespace.yaml

# Apply RBAC
kubectl apply -f rbac-config.yaml

# Create SSH keys secret
kubectl create secret generic ansible-ssh-keys \
  --from-file=id_rsa=ansible-key \
  --from-file=id_rsa.pub=ansible-key.pub \
  -n devops

# Deploy Jenkins
kubectl apply -f jenkins-deployment.yaml

# Create ConfigMaps
kubectl apply -f ansible-playbooks-configmap.yaml

# Deploy Ansible
kubectl apply -f ansible-deployment.yaml

# Check deployments
kubectl get pods -n devops
kubectl get services -n devops